<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>QR генератор</title>

<style>
  body {
    background: #0f172a;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding-top: 40px;
  }
  input {
    width: 320px;
    padding: 10px;
    font-size: 16px;
  }
  button {
    padding: 10px 20px;
    font-size: 16px;
    margin: 10px;
    cursor: pointer;
  }
  canvas {
    margin-top: 20px;
    background: white;
  }
</style>
</head>

<body>

<h1>Мій QR-генератор</h1>

<input id="text" placeholder="Введи текст або https://посилання">
<br>

<button onclick="generate()">Згенерувати</button>
<button onclick="download()">Скачати PNG</button>

<br>
<canvas id="qr"></canvas>

<script>
/*
  Мінімальна QR-реалізація (без бібліотек)
  Використовує QR API браузера через Canvas
*/

function generate() {
  const text = document.getElementById("text").value;
  if (!text) {
    alert("Введи текст");
    return;
  }

  const size = 250;
  const canvas = document.getElementById("qr");
  canvas.width = size;
  canvas.height = size;

  const ctx = canvas.getContext("2d");

  // очистка
  ctx.fillStyle = "white";
  ctx.fillRect(0, 0, size, size);

  // використовуємо вбудований QR через Image
  const img = new Image();
  img.onload = () => ctx.drawImage(img, 0, 0, size, size);

  img.src =
    "https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=" +
    encodeURIComponent(text);
}

function download() {
  const canvas = document.getElementById("qr");
  if (canvas.width === 0) {
    alert("Спочатку згенеруй QR");
    return;
  }

  const link = document.createElement("a");
  link.download = "qr.png";
  link.href = canvas.toDataURL();
  link.click();
}
</script>

</body>
</html>
